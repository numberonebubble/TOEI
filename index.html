<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Odd Earth Institute</title>

  <style>
    :root{
      --bg:#070A10;
      --fg:#E7EEFF;
      --muted: rgba(231,238,255,.72);
      --glass: rgba(12,16,28,.55);
      --line: rgba(124,255,201,.16);
      --a:#7cffc9;
      --b:#ff8a3d;
    }

    html,body{height:100%; margin:0; background:var(--bg); color:var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial;
      overflow-x:hidden;
    }

    /* Canvas behind everything */
    canvas#bg{
      position:fixed; inset:0; width:100vw; height:100vh; display:block;
      z-index:0;
    }

    /* Elegant fallback background (used if WebGL fails) */
    .fallback{
      position:fixed; inset:0; z-index:0;
      background:
        radial-gradient(1200px 700px at 20% 20%, rgba(124,255,201,.12), transparent 60%),
        radial-gradient(900px 600px at 80% 30%, rgba(255,138,61,.10), transparent 62%),
        radial-gradient(900px 800px at 50% 90%, rgba(130,170,255,.10), transparent 60%),
        linear-gradient(180deg, #05070b, #070A10 60%, #05070b);
      opacity:0;
      transition: opacity .35s ease;
    }
    .fallback.on{ opacity:1; }

    /* Subtle atmospheric grain (not “unstable”) */
    .air{
      pointer-events:none;
      position:fixed; inset:0; z-index:1;
      background:
        radial-gradient(ellipse at center, rgba(255,255,255,.05) 0%, rgba(255,255,255,0) 55%),
        radial-gradient(ellipse at center, rgba(0,0,0,0) 0%, rgba(0,0,0,.55) 70%);
      opacity:.55;
    }

    .wrap{ position:relative; z-index:2; width:min(1100px, calc(100% - 40px)); margin:0 auto; }

    .topbar{
      position:fixed; top:14px; left:50%; transform:translateX(-50%);
      width:min(1100px, calc(100% - 40px));
      z-index:3;
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px;
      border-radius:16px;
      background: linear-gradient(180deg, rgba(12,16,28,.78), rgba(12,16,28,.38));
      border:1px solid rgba(124,255,201,.18);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 46px rgba(0,0,0,.35);
    }

    .brand{
      display:flex; gap:10px; align-items:center;
      text-transform:uppercase;
      letter-spacing:.14em;
      font-size:11px;
      color:rgba(231,238,255,.82);
      font-weight:750;
    }
    .brand b{ color:var(--a); letter-spacing:.18em; }

    .status{
      display:flex; align-items:center; gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(124,255,201,.18);
      background: rgba(12,16,28,.35);
      font-size:11px;
      letter-spacing:.08em;
      color: rgba(231,238,255,.70);
      text-transform:uppercase;
      user-select:none;
    }
    .led{
      width:8px; height:8px; border-radius:50%;
      background: rgba(231,238,255,.25);
      box-shadow:none;
    }
    .led.live{ background: var(--a); box-shadow: 0 0 16px rgba(124,255,201,.55); }
    .led.fallback{ background: var(--b); box-shadow: 0 0 16px rgba(255,138,61,.45); }

    .nav{ display:flex; gap:10px; align-items:center; font-size:12px; }
    .nav a{
      color: rgba(231,238,255,.70);
      text-decoration:none;
      padding:7px 10px;
      border-radius:12px;
      border:1px solid rgba(124,255,201,.12);
      background: rgba(12,16,28,.25);
    }
    .nav a:hover{ border-color: rgba(124,255,201,.26); color: rgba(231,238,255,.92); }

    section{
      min-height: 100vh;
      display:flex; align-items:center;
      padding: 108px 0 78px;
    }

    .panel{
      width:min(760px, 100%);
      background: linear-gradient(180deg, rgba(12,16,28,.60), rgba(12,16,28,.36));
      border:1px solid rgba(124,255,201,.16);
      border-radius: 22px;
      padding: 26px 24px;
      box-shadow: 0 28px 60px rgba(0,0,0,.40);
      backdrop-filter: blur(12px);
    }

    .kicker{
      color: rgba(124,255,201,.95);
      text-transform:uppercase;
      letter-spacing:.18em;
      font-size:11px;
      font-weight:750;
      margin-bottom: 12px;
    }

    h1{
      margin:0 0 12px;
      font-size: clamp(38px, 4.6vw, 60px);
      letter-spacing:-.02em;
      line-height:1.04;
    }
    h2{
      margin:0 0 10px;
      font-size: clamp(24px, 3.0vw, 34px);
      letter-spacing:-.01em;
    }
    p{
      margin:0 0 14px;
      color: var(--muted);
      font-size: 15.6px;
      line-height:1.58;
    }
    .emph{ color: rgba(231,238,255,.92); }

    .rule{
      height:1px;
      background: linear-gradient(90deg, rgba(124,255,201,.50), rgba(124,255,201,0));
      margin: 16px 0 18px;
    }

    .chips{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 12px; }
    .chip{
      font-size:12px;
      color: rgba(231,238,255,.78);
      padding:8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(124,255,201,.14);
      background: rgba(12,16,28,.25);
    }

    .ctaRow{ display:flex; gap:12px; flex-wrap:wrap; margin-top: 16px; align-items:center; }
    .btn{
      cursor:pointer; border:none;
      border-radius: 14px;
      padding: 11px 14px;
      font-weight:800;
      letter-spacing:.10em;
      text-transform:uppercase;
      font-size:12px;
      color: rgba(7,10,16,.95);
      background: linear-gradient(90deg, var(--a), rgba(124,255,201,.62));
      box-shadow: 0 18px 40px rgba(0,0,0,.30);
    }
    .btn.ghost{
      border:1px solid rgba(124,255,201,.22);
      background: rgba(12,16,28,.22);
      color: rgba(231,238,255,.86);
    }

    .small{ font-size:12px; color: rgba(231,238,255,.58); margin-top: 8px; }
    .footer{ padding-bottom: 140px; }

    @media (max-width: 520px){
      .nav{ display:none; }
      section{ padding-top: 96px; }
      .panel{ padding: 22px 18px; border-radius: 18px; }
    }
  </style>
</head>

<body>
  <canvas id="bg"></canvas>
  <div class="fallback" id="fallback"></div>
  <div class="air"></div>

  <div class="topbar">
    <div class="brand"><b>ODD</b> EARTH INSTITUTE</div>
    <div style="display:flex; gap:10px; align-items:center;">
      <div class="status" id="statusPill"><span class="led" id="statusLed"></span> Field: <span id="statusText">booting</span></div>
      <div class="nav">
        <a href="#enter">Enter</a>
        <a href="#philosophy">Philosophy</a>
        <a href="#domains">Domains</a>
        <a href="#signal">Signal</a>
      </div>
    </div>
  </div>

  <div class="wrap">
    <section id="enter" data-shape="0">
      <div class="panel">
        <div class="kicker">lateral thinking • mature technologies • proof of concept</div>
        <h1>Progress moves sideways.</h1>
        <p class="emph">
          Odd Earth Institute explores proof-of-concept alternatives in biomedicine, biotechnology,
          forensics, and climate resilience — by re-applying mature technologies in unexpected contexts.
        </p>
        <p>
          We build prototypes that feel obvious in retrospect:
          practical, measurable, and deployable — without requiring billion-dollar infrastructure.
        </p>
        <div class="rule"></div>
        <p class="small">Scroll to see the field morph. If your browser can’t render WebGL, you’ll see a clean fallback instead.</p>
        <div class="ctaRow">
          <button class="btn" onclick="document.querySelector('#philosophy').scrollIntoView({behavior:'smooth'})">Enter</button>
          <button class="btn ghost" onclick="document.querySelector('#signal').scrollIntoView({behavior:'smooth'})">Register interest</button>
        </div>
      </div>
    </section>

    <section id="philosophy" data-shape="1">
      <div class="panel">
        <div class="kicker">gunpei yokoi</div>
        <h2>Lateral thinking with mature technologies.</h2>
        <p>
          The institute is built around a simple principle:
          innovation is often not invention — it’s <span class="emph">reframing</span>.
        </p>
        <p class="emph">
          A calculator becomes a game console. A camera becomes a biosensor. A “dead” component becomes a new instrument.
        </p>
      </div>
    </section>

    <section id="domains" data-shape="2">
      <div class="panel">
        <div class="kicker">where sideways matters most</div>
        <h2>Domains</h2>
        <p>
          Mature technologies unlock disproportionate impact where mainstream approaches are expensive, slow, or centralised.
        </p>
        <div class="chips">
          <div class="chip">biomedical sensing</div>
          <div class="chip">biotechnology</div>
          <div class="chip">forensics & public safety</div>
          <div class="chip">first response</div>
          <div class="chip">climate & resilience</div>
          <div class="chip">low-resource diagnostics</div>
        </div>
      </div>
    </section>

    <section id="signal" class="footer" data-shape="3">
      <div class="panel">
        <div class="kicker">signal</div>
        <h2>Early supporters & collaborators</h2>
        <p>
          This is the beginning. If you want first access to prototypes, partnerships, and releases,
          connect this button to your mailing list / form.
        </p>
        <div class="ctaRow">
          <button class="btn" onclick="alert('Hook this to Typeform/Wix/ConvertKit.');">Register interest</button>
          <button class="btn ghost" onclick="window.scrollTo({top:0, behavior:'smooth'})">Back to top</button>
        </div>
        <div class="small">© <span id="year"></span> Odd Earth Institute</div>
      </div>
    </section>
  </div>

  <!-- Use a very stable CDN for three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.min.js"></script>

  <script>
    // ---------- status helpers ----------
    const fallback = document.getElementById('fallback');
    const led = document.getElementById('statusLed');
    const text = document.getElementById('statusText');
    const setLive = () => { led.className = 'led live'; text.textContent = 'live'; fallback.classList.remove('on'); };
    const setFallback = (msg) => { led.className = 'led fallback'; text.textContent = msg || 'fallback'; fallback.classList.add('on'); };

    document.getElementById('year').textContent = new Date().getFullYear();

    // ---------- WebGL availability ----------
    function webglOK(){
      try{
        const c = document.createElement('canvas');
        return !!(window.WebGLRenderingContext && (c.getContext('webgl') || c.getContext('experimental-webgl')));
      }catch(e){ return false; }
    }

    window.addEventListener('load', () => {
      try{
        if(!webglOK()){ setFallback('no webgl'); return; }
        if(typeof THREE === 'undefined'){ setFallback('three.js failed'); return; }

        // ---------- three.js scene ----------
        const canvas = document.getElementById('bg');
        const renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:true });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 1.6));
        renderer.setSize(window.innerWidth, window.innerHeight, false);
        renderer.setClearColor(0x000000, 0);

        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x070A10, 0.012);

        const camera = new THREE.PerspectiveCamera(55, window.innerWidth/window.innerHeight, 0.1, 2000);
        camera.position.set(0,0,165);

        scene.add(new THREE.AmbientLight(0xffffff, 0.75));
        const d = new THREE.DirectionalLight(0xffffff, 0.65);
        d.position.set(2.2, 3.0, 4.5);
        scene.add(d);

        const isSmall = Math.min(window.innerWidth, window.innerHeight) < 720;
        const N = isSmall ? 6500 : 12000;

        const geo = new THREE.BufferGeometry();
        const pos = new Float32Array(N*3);
        geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));

        const mat = new THREE.PointsMaterial({
          color: 0x7cffc9,
          size: isSmall ? 1.18 : 0.98,
          transparent:true,
          opacity:0.72,
          depthWrite:false,
          blending: THREE.AdditiveBlending
        });

        const points = new THREE.Points(geo, mat);
        scene.add(points);

        // ---------- shapes (centered, calm) ----------
        const rand = (a,b)=>a+Math.random()*(b-a);
        const lerp = (a,b,t)=>a+(b-a)*t;
        const clamp01 = x=>Math.max(0,Math.min(1,x));
        const smoothstep = t=>t*t*(3-2*t);

        function makeCloud(){
          const t = new Float32Array(N*3);
          for(let i=0;i<N;i++){
            const r = Math.pow(Math.random(),0.65)*78;
            const th = Math.random()*Math.PI*2;
            const ph = Math.acos(rand(-1,1));
            t[i*3+0]=r*Math.sin(ph)*Math.cos(th);
            t[i*3+1]=r*Math.sin(ph)*Math.sin(th);
            t[i*3+2]=r*Math.cos(ph);
          }
          return t;
        }

        function makeSlab(){
          const t = new Float32Array(N*3);
          const w=132,h=74,skew=0.22;
          for(let i=0;i<N;i++){
            const u=Math.random(), v=Math.random();
            let x=(u-0.5)*w, y=(v-0.5)*h;
            x += y*skew;
            // light quantization (subtle, not “glitch”)
            const cols=11, rows=6;
            const ku=Math.floor(u*cols)/cols + rand(-0.012,0.012);
            const kv=Math.floor(v*rows)/rows + rand(-0.012,0.012);
            x=(ku-0.5)*w + ((kv-0.5)*h)*skew;
            y=(kv-0.5)*h;
            t[i*3+0]=x; t[i*3+1]=y; t[i*3+2]=rand(-7,7);
          }
          return t;
        }

        function makeHelix(){
          const t = new Float32Array(N*3);
          const turns=9.5;
          for(let i=0;i<N;i++){
            const p=i/(N-1);
            const y=lerp(-75,75,p);
            const a=p*Math.PI*2*turns;
            const r=22+4*Math.sin(p*6.0);
            let x=Math.cos(a)*r, z=Math.sin(a)*r;
            const strand=(i%2===0)?1:-1;
            x += strand*6.0;
            z += strand*-6.0;
            if(i%9===0){ x*=0.28; z*=0.28; }
            t[i*3+0]=x; t[i*3+1]=y; t[i*3+2]=z;
          }
          return t;
        }

        function makeInfinity(){
          const t = new Float32Array(N*3);
          for(let i=0;i<N;i++){
            const p=i/(N-1);
            const a=p*Math.PI*2;
            const scale=56;
            const denom=1+Math.sin(a)*Math.sin(a);
            let x=(Math.cos(a)/denom)*scale;
            let y=(Math.sin(a)*Math.cos(a)/denom)*scale;
            // thickness
            const th=rand(-1,1), nx=-Math.sin(a), ny=Math.cos(a);
            x += nx*th*7.5;
            y += ny*th*7.5;
            const z=Math.sin(a*2)*12 + rand(-2,2);
            t[i*3+0]=x; t[i*3+1]=y; t[i*3+2]=z;
          }
          return t;
        }

        const targets = [makeCloud(), makeSlab(), makeHelix(), makeInfinity()];

        // init
        pos.set(targets[0]);
        geo.attributes.position.needsUpdate = true;

        // section snap
        const sections = [...document.querySelectorAll('section[data-shape]')];
        let targetShape = 0, fromShape = 0, toShape = 0, morphT = 1;

        const io = new IntersectionObserver((entries)=>{
          let best=null;
          for(const e of entries){
            if(!e.isIntersecting) continue;
            if(!best || e.intersectionRatio>best.intersectionRatio) best=e;
          }
          if(best){
            targetShape = Number(best.target.getAttribute('data-shape')||0);
            if(targetShape !== toShape){
              fromShape = toShape;
              toShape = targetShape;
              morphT = 0;
            }
          }
        }, { threshold:[0.25,0.4,0.55,0.7] });
        sections.forEach(s=>io.observe(s));

        // calm motion
        let mx=0,my=0;
        window.addEventListener('pointermove',(e)=>{
          mx=(e.clientX/window.innerWidth)*2-1;
          my=(e.clientY/window.innerHeight)*2-1;
        }, {passive:true});

        function resize(){
          renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 1.6));
          renderer.setSize(window.innerWidth, window.innerHeight, false);
          camera.aspect=window.innerWidth/window.innerHeight;
          camera.updateProjectionMatrix();
        }
        window.addEventListener('resize', resize);

        setLive();

        let t0 = performance.now();
        function tick(now){
          const dt = Math.min(34, now-t0); t0=now;

          morphT = clamp01(morphT + dt*0.0022);
          const tS = smoothstep(morphT);

          const A = targets[fromShape];
          const B = targets[toShape];

          // very gentle parallax
          camera.position.x = mx*2.2 + Math.sin(now*0.00022)*0.7;
          camera.position.y = -my*2.2 + Math.cos(now*0.00018)*0.6;
          camera.lookAt(0,0,0);

          // subtle drift so it feels alive, not chaotic
          const driftAmp = (toShape===1 || toShape===2) ? 0.55 : 0.95;

          const arr = geo.attributes.position.array;
          for(let i=0;i<N;i++){
            const i3=i*3;

            let x=lerp(A[i3+0], B[i3+0], tS);
            let y=lerp(A[i3+1], B[i3+1], tS);
            let z=lerp(A[i3+2], B[i3+2], tS);

            const seed=i*0.017;
            x += Math.sin(now*0.0030 + seed)*driftAmp;
            y += Math.cos(now*0.0027 + seed*1.3)*(driftAmp*0.8);
            z += Math.sin(now*0.0032 + seed*0.7)*(driftAmp*0.6);

            arr[i3+0]=x; arr[i3+1]=y; arr[i3+2]=z;
          }
          geo.attributes.position.needsUpdate = true;

          renderer.render(scene, camera);
          requestAnimationFrame(tick);
        }
        requestAnimationFrame(tick);

      }catch(err){
        console.error(err);
        setFallback('error');
      }
    });
  </script>
</body>
</html>
